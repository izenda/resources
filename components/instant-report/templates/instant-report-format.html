<div ng-controller="InstantReportFormatController as irFormatController"
	 class="iz-inst-format-container"
	 ng-init="irFormatController.init()" ng-cloak>
	<div class="container-fluid">
		<div class="form-group">
			<div class="checkbox">
				<label>
					<input type="checkbox" ng-model="irFormatController.options.isSubtotalsEnabled" />
					<span ng-bind=":: 'js_Subtotals' | izendaLocale: 'Subtotals'"></span>
				</label>
			</div>
			<div class="checkbox"
				 ng-if="irFormatController.settings.allowVirtualDataSources">
				<label>
					<input type="checkbox" ng-model="irFormatController.options.exposeAsDatasource" />
					<span ng-bind=":: 'js_ExposeAsDatasource' | izendaLocale: 'Expose as datasource'"></span>
				</label>
			</div>
			<div class="checkbox">
				<label>
					<input type="checkbox" ng-model="irFormatController.options.hideGrid" />
					<span ng-bind=":: 'js_HideGrid' | izendaLocale: 'Hide grid'"></span>
				</label>
			</div>
		</div>
		<div class="form-group">
			<div class="form-inline">
				<label for="izInstTop" class="nobold">
					<span ng-bind=":: 'js_RecordsCount' | izendaLocale: 'Records count'"></span>
					:&nbsp;
				</label>
				<input type="number" class="form-control izenda-common-width-100" id="izInstTop"
					   min="1" ng-model="irFormatController.options.top" izenda-integer-input />
			</div>
		</div>
	</div>
	<!-- HEADER AND FOOTER OPTIONS -->
	<div class="ds-tree-item noselect">
		<div class="ds-tree-item-header"
			 ng-click="irFormatController.optGroups['headerAndFooter'].opened = !irFormatController.optGroups['headerAndFooter'].opened">
			<span class="glyphicon glyphicon-chevron-right with-label"
				  ng-class="irFormatController.optGroups['headerAndFooter'].opened ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right'">
			</span>
			<span class="ds-tree-item-header-text bold"
				  ng-bind=":: 'js_HeaderAndFooter' | izendaLocale: 'Header and footer'">
			</span>
		</div>
		<div class="ds-tree-item-body" collapsed="!irFormatController.optGroups['headerAndFooter'].opened" izenda-bootstrap-collapse>
			<div class="container-fluid">
				<div class="form-group">
					<label class="nobold"
						   ng-bind=":: 'js_ReportHeaderImage' | izendaLocale: 'Report header image'">
					</label>
					<span izenda-align-switcher ng-model="irFormatController.options.imageAlign"
						  ng-attr-title="{{'js_SelectReportHeaderImageAlign' | izendaLocale: 'Select report header image align'}}">
					</span>
				</div>
				<div class="form-group">
					<label for="izInstFormatReportHeader" class="nobold"
						   ng-bind=":: 'js_ReportHeader' | izendaLocale: 'Report header'">
					</label>
					<span izenda-align-switcher ng-model="irFormatController.options.headerAndFooter.reportHeaderAlign"
						  ng-attr-title="{{'js_SelectReportHeaderAlign' | izendaLocale: 'Select report header align'}}">
					</span>
					<textarea class="form-control noresize multiline-input" id="izInstFormatReportHeader" rows="2"
							  ng-model="irFormatController.options.headerAndFooter.reportHeader"></textarea>
				</div>
				<div class="form-group">
					<label for="izInstFormatTitle" class="nobold"
						   ng-bind=":: 'js_Title' | izendaLocale: 'Title'">
					</label>
					<span izenda-align-switcher ng-model="irFormatController.options.titleAlign"
						  ng-attr-title="{{'js_SelectTitleAlign' | izendaLocale: 'Select title align'}}">
					</span>
					<textarea class="form-control noresize multiline-input" id="izInstFormatTitle" rows="2"
							  ng-model="irFormatController.options.title"></textarea>
				</div>
				<div class="form-group">
					<label for="izInstFormatDescription" class="nobold"
						   ng-bind=":: 'js_Description' | izendaLocale: 'Description'">
					</label>
					<span izenda-align-switcher ng-model="irFormatController.options.descriptionAlign"
						  ng-attr-title="{{'js_SelectDescAlign' | izendaLocale: 'Select description align'}}">
					</span>
					<textarea class="form-control noresize multiline-input" id="izInstFormatDescription" rows="2"
							  ng-model="irFormatController.options.description"></textarea>
				</div>
				<div class="form-group">
					<label for="izInstFormatPageHeader" class="nobold"
						   ng-bind=":: 'js_PageHeader' | izendaLocale: 'Page header'">
					</label>
					<textarea class="form-control noresize multiline-input" id="izInstFormatPageHeader" rows="2"
							  ng-model="irFormatController.options.headerAndFooter.pageHeader"></textarea>
				</div>
				<div class="form-group">
					<label for="izInstFormatReportFooter" class="nobold"
						   ng-bind=":: 'js_ReportFooter' | izendaLocale: 'Report footer'">
					</label>
					<span izenda-align-switcher ng-model="irFormatController.options.headerAndFooter.reportFooterAlign"
						  ng-attr-title="{{'js_SelectReportFooterAlign' | izendaLocale: 'Select report footer align'}}">
					</span>
					<textarea class="form-control noresize multiline-input" id="izInstFormatReportFooter" rows="2"
							  ng-model="irFormatController.options.headerAndFooter.reportFooter"></textarea>
				</div>
				<div class="checkbox">
					<label>
						<input type="checkbox" ng-model="irFormatController.options.showFiltersInReportDescription" />
						<span ng-bind=":: 'js_ShowReportParameters' | izendaLocale: 'Show Filters In Report Description'"></span>
					</label>
				</div>
			</div>
		</div>
	</div>

	<!-- COLOR OPTIONS -->
	<div class="ds-tree-item noselect">
		<div class="ds-tree-item-header"
			 ng-click="irFormatController.optGroups['color'].opened = !irFormatController.optGroups['color'].opened">
			<span class="glyphicon glyphicon-chevron-right with-label"
				  ng-class="irFormatController.optGroups['color'].opened ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right'">
			</span>
			<span class="ds-tree-item-header-text bold"
				  ng-bind=":: 'js_ColorsAndStyles' | izendaLocale: 'Colors and styles'">
			</span>
		</div>
		<div class="ds-tree-item-body" collapsed="!irFormatController.optGroups['color'].opened" izenda-bootstrap-collapse>
			<div class="form-group">
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-6 default-bottom-margin">
							<label class="nobold"
								   ng-bind=":: 'js_BorderColor' | izendaLocale: 'Border color'">
							</label>
							<span ng-if="!$izendaCompatibilityService.isSmallResolution()"
								  izenda-color-picker inline="false"
								  ng-model="irFormatController.options.style.borderColor">
							</span>
							<input ng-if="$izendaCompatibilityService.isSmallResolution()"
								   class="form-control"
								   ng-attr-type="{{Modernizr.inputtypes.color ? 'color' : 'text'}}"
								   ng-model="irFormatController.options.style.borderColor" />
						</div>
						<div class="col-md-6 default-bottom-margin">
							<label class="nobold"
								   ng-bind=":: 'js_HeaderColor' | izendaLocale: 'Header color'">
							</label>
							<span ng-if="!$izendaCompatibilityService.isSmallResolution()"
								  izenda-color-picker inline="false"
								  ng-model="irFormatController.options.style.headerColor">
							</span>
							<input ng-if="$izendaCompatibilityService.isSmallResolution()"
								   class="form-control"
								   ng-attr-type="{{Modernizr.inputtypes.color ? 'color' : 'text'}}"
								   ng-model="irFormatController.options.style.headerColor" />
						</div>
					</div>
					<div class="row">
						<div class="col-md-6 default-bottom-margin">
							<label class="nobold"
								   ng-bind=":: 'js_HeaderForegroundColor' | izendaLocale: 'Header foreground color'">
							</label>
							<span ng-if="!$izendaCompatibilityService.isSmallResolution()"
								  izenda-color-picker inline="false"
								  ng-model="irFormatController.options.style.headerForecolor">
							</span>
							<input ng-if="$izendaCompatibilityService.isSmallResolution()"
								   class="form-control"
								   ng-attr-type="{{Modernizr.inputtypes.color ? 'color' : 'text'}}"
								   ng-model="irFormatController.options.style.headerForecolor" />
						</div>
						<div class="col-md-6 default-bottom-margin">
							<label class="nobold"
								   ng-bind=":: 'js_ItemColor' | izendaLocale: 'Item color'">
							</label>
							<span ng-if="!$izendaCompatibilityService.isSmallResolution()"
								  izenda-color-picker inline="false"
								  ng-model="irFormatController.options.style.itemColor">
							</span>
							<input ng-if="$izendaCompatibilityService.isSmallResolution()"
								   class="form-control"
								   ng-attr-type="{{Modernizr.inputtypes.color ? 'color' : 'text'}}"
								   ng-model="irFormatController.options.style.itemColor" />
						</div>
					</div>
					<div class="row">
						<div class="col-md-6 default-bottom-margin">
							<label class="nobold"
								   ng-bind=":: 'js_ItemForegroundColor' | izendaLocale: 'Item foreground color'">
							</label>
							<span ng-if="!$izendaCompatibilityService.isSmallResolution()"
								  izenda-color-picker inline="false"
								  ng-model="irFormatController.options.style.itemForeColor">
							</span>
							<input ng-if="$izendaCompatibilityService.isSmallResolution()"
								   class="form-control"
								   ng-attr-type="{{Modernizr.inputtypes.color ? 'color' : 'text'}}"
								   ng-model="irFormatController.options.style.itemForeColor" />
						</div>
						<div class="col-md-6 default-bottom-margin">
							<label class="nobold"
								   ng-bind=":: 'js_AlternatingItemColor' | izendaLocale: 'Alternating item color'">
							</label>
							<span ng-if="!$izendaCompatibilityService.isSmallResolution()"
								  izenda-color-picker inline="false"
								  ng-model="irFormatController.options.style.itemAltColor">
							</span>
							<input ng-if="$izendaCompatibilityService.isSmallResolution()"
								   class="form-control"
								   ng-attr-type="{{Modernizr.inputtypes.color ? 'color' : 'text'}}"
								   ng-model="irFormatController.options.style.itemAltColor" />
						</div>
					</div>
					<div class="row">
						<div class="col-xs-12">
							<div class="checkbox">
								<label>
									<input type="checkbox" ng-model="irFormatController.options.style.isHeadersBold" />
									<span ng-bind=":: 'js_AllFieldHeadersBold' | izendaLocale: 'All field headers bold'"></span>
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input type="checkbox" ng-model="irFormatController.options.style.isHeadersItalic">
									<span ng-bind=":: 'js_AllFieldHeadersItalic' | izendaLocale: 'All field headers italic'"></span>
								</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-12">
							<div class="form-group">
								<label for="izInstFormatCustomCss" class="nobold"
									   ng-bind=":: 'js_CustomCss' | izendaLocale: 'Custom CSS'">
								</label>
								<textarea class="form-control noresize multiline-input" id="izInstFormatCustomCss" rows="3"
										  ng-model="irFormatController.options.style.customCss"></textarea>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-12">
							<button type="button" class="btn izenda-common-btn-dark"
									ng-click="irFormatController.restoreDefaultColors()"
									ng-bind=":: 'js_RestoreDefaultColors' | izendaLocale: 'Restore default colors'"></button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- PAGE OPTIONS -->
	<div class="ds-tree-item noselect">
		<div class="ds-tree-item-header"
			 ng-click="irFormatController.optGroups['page'].opened = !irFormatController.optGroups['page'].opened">
			<span class="glyphicon glyphicon-chevron-right with-label"
				  ng-class="irFormatController.optGroups['page'].opened ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right'">
			</span>
			<span class="ds-tree-item-header-text bold"
				  ng-bind=":: 'js_Page' | izendaLocale: 'Page'">
			</span>
		</div>
		<div class="ds-tree-item-body" collapsed="!irFormatController.optGroups['page'].opened" izenda-bootstrap-collapse>
			<div class="form-group">
				<div class="container-fluid">
					<div class="row">
						<div class="col-xs-12">
							<div class="checkbox">
								<label>
									<input type="checkbox" ng-model="irFormatController.options.page.landscapePrinting" />
									<span ng-bind=":: 'js_LandscapePrinting' | izendaLocale: 'Landscape printing (PDF)'"></span>
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input type="checkbox" ng-model="irFormatController.options.page.showPageNumber" />
									<span ng-bind=":: 'js_ShowPageNumber' | izendaLocale: 'Show page number'"></span>
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input type="checkbox" ng-model="irFormatController.options.page.showDateAndTime" />
									<span ng-bind=":: 'js_ShowDateAndTime' | izendaLocale: 'Show date and time'"></span>
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input type="checkbox" ng-model="irFormatController.options.page.usePagination" />
									<span ng-bind=":: 'js_UsePagination' | izendaLocale: 'Use pagination'"></span>
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input type="checkbox" ng-model="irFormatController.options.page.addBookmarkForVg" />
									<span ng-bind=":: 'js_AddBookmarkForVisualGroup' | izendaLocale: 'Add bookmark for each visual group'"></span>
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input type="checkbox" ng-model="irFormatController.options.page.pageBreakAfterVg" />
									<span ng-bind=":: 'js_PageBreakAfterVisualGroups' | izendaLocale: 'Page Break After Visual Groups (PDF)'"></span>
								</label>
							</div>
							<div class="form-group">
								<label for="izInstVgStyle" class="nobold"
									   ng-bind=":: 'js_VisualGroupStyle' | izendaLocale: 'Visual group style'">
								</label>
								<select id="izInstVgStyle" class="form-control"
										ng-model="irFormatController.options.page.vgStyle"
										ng-options="vgStyle.value as vgStyle.text for vgStyle in irFormatController.vgStyles"></select>
							</div>
							<div class="checkbox">
								<label>
									<input type="checkbox" ng-model="irFormatController.options.page.minimizeGridWidth" />
									<span ng-bind=":: 'js_MinimizeGridWidth' | izendaLocale: 'Minimize Grid Width'"></span>
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input type="checkbox" ng-model="irFormatController.options.page.enableResponsiveGrid" />
									<span ng-bind=":: 'js_EnableResponsiveGrid' | izendaLocale: 'Enable Responsive Grid'"></span>
								</label>
							</div>
							<div class="form-group">
								<label for="izInstItemsPerPage" class="nobold"
									   ng-bind=":: 'js_ItemsPerPage' | izendaLocale: 'Items per page'">
								</label>
								<input type="number" min="1" class="form-control" id="izInstItemsPerPage"
									   ng-model="irFormatController.options.page.itemsPerPage"
									   izenda-integer-input />
							</div>
							<div class="form-group">
								<label for="izInstPivotColumnsCount" class="nobold"
									   ng-bind=":: 'js_PivotsPerPage' | izendaLocale: 'Pivot columns per exported page'">
								</label>
								<input id="izInstPivotColumnsCount" type="number" min="1" class="form-control"
									   ng-model="irFormatController.options.page.pivotsPerPage"
									   izenda-integer-input />
							</div>
							<div class="checkbox">
								<label>
									<input type="checkbox" ng-model="irFormatController.options.page.splitAllColumns" />
									<span ng-bind=":: 'js_SplitAllColumns' | izendaLocale: 'Split all columns'"></span>
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input type="checkbox" ng-model="irFormatController.options.page.pageBreakOnSplit" />
									<span ng-bind=":: 'js_PageBreakOnSplit' | izendaLocale: 'Page break on split'"></span>
								</label>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- DRILLDOWN KEYS -->
	<div class="ds-tree-item noselect">
		<div class="ds-tree-item-header"
			 ng-click="irFormatController.optGroups['drilldowns'].opened = !irFormatController.optGroups['drilldowns'].opened">
			<span class="glyphicon glyphicon-chevron-right with-label"
				  ng-class="irFormatController.optGroups['drilldowns'].opened ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right'">
			</span>
			<span class="ds-tree-item-header-text bold"
				  ng-bind=":: 'js_DrilldownKeys' | izendaLocale: 'Drilldown keys'">
			</span>
		</div>
		<div class="ds-tree-item-body" collapsed="!irFormatController.optGroups['drilldowns'].opened" izenda-bootstrap-collapse>
			<div class="form-group">
				<div class="container-fluid">
					<div class="row">
						<div class="col-xs-12"
							 ng-repeat="drillDownField in irFormatController.drillDownFields">
							<div class="ds-tree-item noselect">
								<div class="ds-tree-item-header">
									<span class="ds-tree-item-header-text"
										  ng-bind="($index + 1) + '. ' + drillDownField.name">
									</span>
									<span class="ds-multiple-button"
										  ng-attr-title="{{'js_RemoveField' | izendaLocale: 'Remove field'}}"
										  ng-click="irFormatController.removeDrilldownField(drillDownField); $event.stopPropagation();">
										<span class="glyphicon glyphicon glyphicon-remove-circle"></span>
									</span>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-12"
							 ng-show="irFormatController.drillDownFields.length >= irFormatController.ddkValuesMaxAmount">
							<div class="alert alert-info" role="alert"
								 ng-bind=":: 'js_MaxDrilldownKeys' | izendaLocale: 'You have reached maximum amount of drilldown keys.'">
							</div>
						</div>
						<div class="col-xs-12"
							 ng-show="irFormatController.drillDownFields.length < irFormatController.ddkValuesMaxAmount">
							<select class="form-control" ng-options="field as field.name group by field.tableSysname for field in irFormatController.allActiveFields track by field.sysname"
									ng-model="irFormatController.selectedDrilldownField"></select>
							<button type="button" class="btn btn-default" ng-click="irFormatController.addDrilldown()"
									ng-disabled="irFormatController.selectedDrilldownField === null"
									ng-bind=":: 'js_AddDrilldownKey' | izendaLocale: 'Add drilldown field'"></button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
